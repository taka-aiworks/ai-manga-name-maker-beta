# ネーム制作ツール - プロジェクト状況ファイル

## 基本情報
- **プロジェクト名**: React製ネーム制作支援ツール
- **技術スタック**: React + TypeScript + HTML5 Canvas
- **開発開始**: 2025年9月8日
- **最終更新**: 2025年9月8日

## 現在の実装状況

### ✅ 完了機能
- **基本Canvas描画**: パネル、キャラクター、吹き出しの表示
- **吹き出し機能**: 
  - 自由移動（パネル外移動可能）
  - 3方向リサイズ（上下端/左右端/四隅で操作分岐）
  - ダブルクリック編集
  - 4種類の形状（普通/叫び/小声/心の声）
- **キャラクター機能**: 
  - パネル内移動
  - 距離ベースリサイズ
  - 4種類のキャラクター（主人公/ヒロイン/ライバル/友人）
- **テンプレート機能**: 6種類のパネルレイアウト
- **ファイル分割**: 保守性向上のための構造化
- **型定義統一**: TypeScriptによる型安全性

### 🔄 進行中
- なし（前回セッションで一区切り）

### ❌ 未実装・課題
1. **キャラクターリサイズ改善**: 吹き出しと同様の操作性に統一
2. **シーンテンプレート自動配置**: テンプレート選択時にキャラ・吹き出し自動生成
3. **キャラクター自由移動**: パネル外移動対応
4. **エクスポート機能**: PDF、PNG、クリスタ用データ出力
5. **アンドゥ/リドゥ機能**: 操作履歴管理

## ファイル構造
```
src/
├── types.ts                    # 共通型定義
├── App.tsx                     # メインアプリ
├── components/
│   ├── CanvasComponent.tsx     # Canvas操作中核
│   └── CanvasArea/
│       ├── EditBubbleModal.tsx # 編集モーダル
│       ├── templates.ts        # テンプレート定義
│       └── renderers/
│           ├── BubbleRenderer.tsx    # 吹き出し描画・操作
│           ├── CharacterRenderer.tsx # キャラクター描画・操作
│           └── PanelRenderer.tsx     # パネル描画・操作
```

## 重要な技術詳細

### 座標系
- **吹き出し**: 絶対座標（キャンバス内自由移動）
- **キャラクター**: 相対座標（パネル内0-1範囲）
- **パネル**: 絶対座標

### 操作方式
- **吹き出しリサイズ**: 領域ベース判定（上下端/左右端/四隅/中央）
- **キャラクターリサイズ**: 距離ベース（要改善）
- **移動**: ドラッグ&ドロップ

### 状態管理
- React useState でローカル管理
- 親子間コールバック方式

## 起動方法
```bash
npm start
# http://localhost:3000 でアクセス
```

## 次回開発時の注意点

### 開発再開時の確認事項
1. 全機能が正常動作するかテスト
2. 型エラーがないかチェック
3. 現在のリサイズ操作感を確認

### 優先開発項目（重要度順）
1. **キャラクターリサイズ統一** (高)
   - BubbleRenderer.tsx の方式をCharacterRenderer.tsx に適用
   - 領域ベース判定の実装
   
2. **シーンテンプレート自動配置** (中)
   - sceneTemplates.ts の実装完了
   - App.tsx でのシーン選択イベント統合

3. **UI/UX改善** (中)
   - 操作説明の充実
   - エラーハンドリング
   - パフォーマンス最適化

### よくある問題と解決法
- **リサイズが効かない**: 状態管理（isDragging, isBubbleResizing）のリセット確認
- **座標がずれる**: 絶対座標と相対座標の計算ミス
- **型エラー**: types.ts の型定義確認

## 前回セッションでの教訓
- 8方向の精密ハンドルより、シンプルな領域判定の方が使いやすい
- 複雑な機能より、確実に動作する機能を優先
- ファイル分割により保守性が大幅に向上

## クイックスタート（新しいClaude向け）
このファイルを提示して「この状態から開発を続けてください」と言えば、現在の実装状況を把握して開発を継続できます。

特に重要なのは：
- 吹き出し機能は完成済み
- キャラクター機能は基本のみ（改善の余地あり）
- ファイル構造は整理済み
- 次の目標は「キャラクターリサイズの改善」

## 開発コマンド
```bash
# 開発サーバー起動
npm start

# ビルド
npm run build

# 型チェック
npx tsc --noEmit
```